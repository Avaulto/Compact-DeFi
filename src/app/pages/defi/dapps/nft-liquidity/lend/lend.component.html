
<ion-list class="data-box ion-padding">
  <ion-list-header class="ion-hide-md-down">
    <ion-row>
      <ion-col size="12" sizeMd="1.8">
        <ion-label>#</ion-label>
      </ion-col>
      <ion-col size="12" sizeMd="2">
        <ion-label>TOTAL LIQUIDITY</ion-label>
      </ion-col>
      <ion-col size="12" sizeMd="2">
        <ion-label>DEPOSIT YIELD</ion-label>
      </ion-col>
      <ion-col size="12" sizeMd="2">
        <ion-label>BORROW INTEREST</ion-label>
      </ion-col>
      <ion-col size="12" sizeMd="2">
        <ion-label>TOTAL BORROWED</ion-label>
      </ion-col>
      <ion-col size="12" sizeMd="2">
        <ion-label>LOAN CAPACITY</ion-label>
      </ion-col>
    </ion-row>

  </ion-list-header>
  <ng-container *ngIf="fraktNfts$ | async as fraktNfts; else elseTemplate">
    <ion-accordion-group (ionChange)="isOpenBox($event)">
      <!-- <ion-virtual-scroll [items]="fraktNftList | async | filter: 'name':searchTerm " approxItemHeight="80px"> -->
      <ion-accordion @slideInOut [value]="i" *ngFor="let loan of fraktNfts | filter:'name':searchTerm;let i = index">

        <ion-item id="attr-header" slot="header" class="ion-no-padding">
          <ion-row class="ion-align-items-center">
            <ion-col size="12" size="2">
              <div class="loan-avatar">
                <ion-img [src]="loan.imageUrl"></ion-img>
                <ion-label>{{loan.name}}</ion-label>
              </div>
            </ion-col>
            <ion-col size="12" sizeMd="2">
              <div class="loan-params-wrapper">
                <ion-label class="ion-hide-md-up">TOTAL LIQUIDITY</ion-label>
                <ion-label>{{loan.totalLiquidity | number: '1.2-2'}} ◎</ion-label>
              </div>
            </ion-col>
            <ion-col size="12" sizeMd="2">
              <div class="loan-params-wrapper">
                <ion-label class="ion-hide-md-up">DEPOSIT YIELD</ion-label>
                <ion-label>{{loan.depositApr}} %</ion-label>
              </div>
            </ion-col>
            <ion-col size="12" sizeMd="2">
              <div class="loan-params-wrapper">
                <ion-label class="ion-hide-md-up">BORROW INTEREST</ion-label>
                <ion-label>{{loan.borrowApr}} %</ion-label>
              </div>
            </ion-col>
            <ion-col size="12" sizeMd="2">
              <div class="loan-params-wrapper">
                <ion-label class="ion-hide-md-up">TOTAL BORROWED</ion-label>
                <ion-label>{{loan.totalBorrowed | number: '1.2-2'}} ◎</ion-label>
              </div>
            </ion-col>
            <ion-col size="12" sizeMd="1.5" class="ion-hide-md-down">
              <ion-progress-bar [tooltip]="'active loans: '+loan.activeloansAmount" [value]="loan.activeloansAmount / loan.maxAmountOfActiveLoans"></ion-progress-bar>
              <span  class="sub">max: {{loan.maxAmountOfActiveLoans}}</span>

            </ion-col>
          </ion-row>
        </ion-item>
        <app-box-content slot="content" [accordionOpen]="currentBoxOpen == i"
          [collectionName]="loan.slug"></app-box-content>

      </ion-accordion>
      <!-- </ion-virtual-scroll> -->
    </ion-accordion-group>
  </ng-container>
  <ng-template #elseTemplate>
    <ion-row style="min-height: 400px;" class="ion-justify-content-center ion-align-items-center">
      <app-loader></app-loader>
    </ion-row>
  </ng-template>

</ion-list>